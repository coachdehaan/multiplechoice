<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Event Attendance</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
  <div id="events"></div>
  <script>
    const { initializeApp } = firebase.default;
    const { getDatabase, ref, set, onValue } = firebase.database;

    // Your web app's Firebase configuration
    const firebaseConfig = {
      // Your Firebase Configuration
    };

    // Initialize Firebase
    const firebaseApp = initializeApp(firebaseConfig);
    const database = getDatabase(firebaseApp);
    const events = [
      { name: "U16 Spring Jam Sioux Falls", date: "April 22-23" },
      { name: "USF Team Sioux Falls", date: "June 17-18" },
      { name: "U16 Summer Classic Sioux Falls", date: "July 21-23" },
      { name: "Hardknockers Rapid City", date: "July 28-29" }
    ];

    const attendees = [
      "Sabas", "Hunter", "Anaias", "Peter", "Garth", "Ryder", "Tyson", "Jamian", "Ethan", "Isaiah", "AJ", "Ty", "Justin", "Koda", "Tate", "Kashton"
    ];

    function updateAttendance(eventIndex, attendeeIndex, attending) {
      const eventRef = ref(database, `events/${eventIndex}/${attendeeIndex}`);
      set(eventRef, attending);
    }
    function renderEvents() {
      const eventsDiv = document.getElementById('events');
      eventsDiv.innerHTML = '';

      events.forEach((event, eventIndex) => {
        const eventDiv = document.createElement('div');
        eventDiv.innerHTML = `<h2>${event.name} (${event.date})</h2>`;
        const attendeeList = document.createElement('ul');

        attendees.forEach((attendee, attendeeIndex) => {
          const attendeeItem = document.createElement('li');
          attendeeItem.textContent = attendee;
          const attendingCheckbox = document.createElement('input');
          attendingCheckbox.type = 'checkbox';
          attendingCheckbox.addEventListener('change', () => {
            updateAttendance(eventIndex, attendeeIndex, attendingCheckbox.checked);
          });

          const eventRef = ref(database, `events/${eventIndex}/${attendeeIndex}`);
          onValue(eventRef, (snapshot) => {
            attendingCheckbox.checked = snapshot.val() || false;
          });

          attendeeItem.appendChild(attendingCheckbox);
          attendeeList.appendChild(attendeeItem);
        });

        eventDiv.appendChild(attendeeList);
        eventsDiv.appendChild(eventDiv);
      });
    }

    renderEvents();
  </script>
</body>
</html>

